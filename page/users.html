<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Flood â€¢ Home</title>
    <link rel="icon" type="image/png" href="./flood.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
    <script src="https://kit.fontawesome.com/5cea3ab10b.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
</head>

<style>
    .center {
        margin: 0;
        position: absolute;
        left: 50%;
        transform: translate(-50%);
    }

    .logout {
        color: hsl(205, 16%, 77%);
    }

    .logout:hover {
        color: white;
    }
</style>

<body>
    <nav>
        <ul style="padding-left: 1rem;">
            <img src="pfp.png" style="height: 1.5rem; border-radius: 50%;">
            <li><strong>MrCingo</strong></li>
        </ul>
        <ul>
            <li>
                <details role="list" dir="rtl">
                    <summary aria-haspopup="listbox" role="link" class="secondary">Models</summary>
                    <ul role="listbox">
                        <li><a href="#">Users</a></li>
                        <li><a href="#">Jobs</a></li>
                        <li><a href="#">Groups</a></li>
                    </ul>
                </details>
            </li>
        </ul>
        <ul style="margin: 0; padding-right: 1rem;">
            <li>
                <a href="#" class="logout">
                    Logout
                </a>
            </li>
            <li>
                <a href="home.html" class="logout" data-tooltip="Home" data-placement="bottom">
                    <i class="fa-solid fa-house" style="font-size: 0.8rem;"></i>
                </a>
            </li>
        </ul>
    </nav>
    <main class="container">
        <div class="grid">
            <article style="padding: 2rem; margin-bottom: 0; background-color: hsl(195, 85%, 41%);">
                <p style="margin: 0;">Users registered</p>
                <h1 style="margin: 0 0 20px;">710.000</h1>
                <small>
                    <p>Currently in the database</p>
                </small>
            </article>
            <article style="padding: 2rem; margin-bottom: 0; background-color: hsl(19, 85%, 41%);">
                <h1 style="margin: 0 0 1rem;">Search a User</h1>
                <input onkeypress="handle(event)" type="search" id="search" name="search" placeholder="Search">
                <button onclick="" class="reload" style="background-color: hsl(19, 78%, 56%); border-color: transparent;"><i
                        class="fa-solid fa-rotate-right"></i> Reload</button>
            </article>
        </div>
        
        <article style="padding: 2rem; margin-bottom: 0; margin-top: 30px; background-color: hsl(244, 57%, 60%); text-align: center;">
            <figure>
                <table role="grid" id="users">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Username</th>
                            <th scope="col">Description</th>
                            <th scope="col">Mail</th>
                            <th scope="col">Balance</th>
                            <th scope="col">Operator</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="1">
                            <th scope="row">1</th>
                            <td contenteditable="true">MrCingo</td>
                            <td contenteditable="true">Lorem ipsum dolor sit amet.</td>
                            <td contenteditable="true">mrcingosup@gmail.com</td>
                            <td contenteditable="true">2000</td>
                            <td>
                                <label for="switch" style="margin: 0;">
                                    <input type="checkbox" id="switch" name="switch" role="switch">
                                </label>
                            </td>
                            <td><button type="submit" style="background-color: #D2042D; margin: 0;"
                                    class="secondary">Remove</button>
                                <button type="submit" style="background-color: palegreen; margin: 0;"
                                    class="secondary">Save</button>
                            </td>
                            <td></td>
                        </tr>
                        <tr id="2">
                            <th scope="row">2</th>
                            <td contenteditable="true">Isabel Casali</td>
                            <td contenteditable="true">Lorem ipsum dolor sit amet.</td>
                            <td contenteditable="true">mrcingosup@gmail.com</td>
                            <td contenteditable="true">2000</td>
                            <td>
                                <label for="switch" style="margin: 0;">
                                    <input type="checkbox" id="switch" name="switch" role="switch">
                                </label>
                            </td>
                            <td><button type="submit" style="background-color: #D2042D; margin: 0;"
                                    class="secondary">Remove</button>
                                <button type="submit" style="background-color: palegreen; margin: 0;"
                                    class="secondary">Save</button>
                            </td>
                            <td></td>
                        </tr>
                        <tr id="3">
                            <th scope="row">3</th>
                            <td contenteditable="true">Josep Casaramona</td>
                            <td contenteditable="true">Lorem ipsum dolor sit amet.</td>
                            <td contenteditable="true">mrcingosup@gmail.com</td>
                            <td contenteditable="true">2000</td>
                            <td>
                                <label for="switch" style="margin: 0;">
                                    <input type="checkbox" id="switch" name="switch" role="switch">
                                </label>
                            </td>
                            <td><button type="submit" style="background-color: #D2042D; margin: 0;"
                                    class="secondary">Remove</button>
                                <button type="submit" style="background-color: palegreen; margin: 0;"
                                    class="secondary">Save</button>
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </figure>
        </article>
    </main>

    <script>
        function handle(event) {
            user = null
            search = document.getElementById("search").value
    
            table = document.getElementById('users')
            rows = table.rows
    
            if (event.keyCode === 13) {
                for (const row in rows) {
                    cells = rows[row].cells
    
                    if (row < 1) continue;
                    try {
                        username = cells[1].innerHTML
                        if (search == username) {
                            user = username
                        }
                    }
                    catch (error) { }
                }
                console.log(user)
                if (user == null) {
                    var notyf = new Notyf();
                    notyf.error({ message: 'User not found.', dismissible: true });
                    return
                }
    
                i = 1;
                while (rows.lenght != 1) {
                    if (rows[i] == undefined) {
                        break
                    }
                    cells = rows[i].cells
                    i++;
                    if (cells[1].innerHTML != search) {
                        i--;
                        rows[i].remove()
                    }
                }
            }
        }
        function addRow(tableId, rows) {
            table = document.getElementById(tableId)
            let newRow = table.insertRow(-1);
            for (let i = 0; i < table.rows[0].lenght; i++) {
                let newCell = newRow.insertCell(0);
                let newText = document.createTextNode("1");
                newCell.appendChild(newText);
            }
        }
        addRow('users', ['test'])
    </script>
</body>

</html>